(function(){function a(){}function e(a,d){for(var b=a.length;b--;)if(a[b].listener===d)return b;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var b=a.prototype,f=this,d=f.EventEmitter;b.getListeners=function(a){var d=this._getEvents(),b,c;if("object"===typeof a)for(c in b={},d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c]);else b=d[a]||(d[a]=[]);return b};b.flattenListeners=function(a){var d=[],b;for(b=0;b<a.length;b+=1)d.push(a[b].listener);return d};b.getListenersAsObject=
function(a){var d=this.getListeners(a),b;d instanceof Array&&(b={},b[a]=d);return b||d};b.addListener=function(a,d){var b=this.getListenersAsObject(a),c="object"===typeof d,f;for(f in b)b.hasOwnProperty(f)&&-1===e(b[f],d)&&b[f].push(c?d:{listener:d,once:!1});return this};b.on=c("addListener");b.addOnceListener=function(a,d){return this.addListener(a,{listener:d,once:!0})};b.once=c("addOnceListener");b.defineEvent=function(a){this.getListeners(a);return this};b.defineEvents=function(a){for(var d=0;d<
a.length;d+=1)this.defineEvent(a[d]);return this};b.removeListener=function(a,d){var b=this.getListenersAsObject(a),c,f;for(f in b)b.hasOwnProperty(f)&&(c=e(b[f],d),-1!==c&&b[f].splice(c,1));return this};b.off=c("removeListener");b.addListeners=function(a,d){return this.manipulateListeners(!1,a,d)};b.removeListeners=function(a,d){return this.manipulateListeners(!0,a,d)};b.manipulateListeners=function(a,d,b){var c,e,f=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;
if("object"!==typeof d||d instanceof RegExp)for(c=b.length;c--;)f.call(this,d,b[c]);else for(c in d)d.hasOwnProperty(c)&&(e=d[c])&&("function"===typeof e?f.call(this,c,e):a.call(this,c,e));return this};b.removeEvent=function(a){var d=typeof a,b=this._getEvents(),c;if("string"===d)delete b[a];else if("object"===d)for(c in b)b.hasOwnProperty(c)&&a.test(c)&&delete b[c];else delete this._events;return this};b.removeAllListeners=c("removeEvent");b.emitEvent=function(a,d){var b=this.getListenersAsObject(a),
c,e,f,p;for(f in b)if(b.hasOwnProperty(f))for(e=b[f].length;e--;)c=b[f][e],!0===c.once&&this.removeListener(a,c.listener),p=c.listener.apply(this,d||[]),p===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this};b.trigger=c("emitEvent");b.emit=function(a){var d=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,d)};b.setOnceReturnValue=function(a){this._onceReturnValue=a;return this};b._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:
!0};b._getEvents=function(){return this._events||(this._events={})};a.noConflict=function(){f.EventEmitter=d;return a};"function"===typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"===typeof module&&module.exports?module.exports=a:this.EventEmitter=a}).call(this);
(function(a){function e(d){var b=a.event;b.target=b.target||b.srcElement||d;return b}var c=document.documentElement,b=function(){};c.addEventListener?b=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(b=function(a,b,c){a[b+c]=c.handleEvent?function(){var b=e(a);c.handleEvent.call(c,b)}:function(){var b=e(a);c.call(a,b)};a.attachEvent("on"+b,a[b+c])});var f=function(){};c.removeEventListener?f=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(f=function(a,b,c){a.detachEvent("on"+
b,a[b+c]);try{delete a[b+c]}catch(e){a[b+c]=void 0}});c={bind:b,unbind:f};"function"===typeof define&&define.amd?define("eventie/eventie",c):a.eventie=c})(this);
(function(a,e){"function"===typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(c,b){return e(a,c,b)}):"object"===typeof exports?module.exports=e(a,require("wolfy87-eventemitter"),require("eventie")):a.imagesLoaded=e(a,a.EventEmitter,a.eventie)})(window,function(a,e,c){function b(a,b){for(var c in b)a[c]=b[c];return a}function f(a){var b=[];if("[object Array]"===n.call(a))b=a;else if("number"===typeof a.length)for(var c=0,d=a.length;c<d;c++)b.push(a[c]);else b.push(a);
return b}function d(a,c,e){if(!(this instanceof d))return new d(a,c);"string"===typeof a&&(a=document.querySelectorAll(a));this.elements=f(a);this.options=b({},this.options);"function"===typeof c?e=c:b(this.options,c);if(e)this.on("always",e);this.getImages();h&&(this.jqDeferred=new h.Deferred);var g=this;setTimeout(function(){g.check()})}function l(a){this.img=a}function g(a){this.src=a;p[a]=this}var h=a.jQuery,k=a.console,m="undefined"!==typeof k,n=Object.prototype.toString;d.prototype=new e;d.prototype.options=
{};d.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);var d=c.nodeType;if(d&&(1===d||9===d||11===d))for(var c=c.querySelectorAll("img"),d=0,e=c.length;d<e;d++)this.addImage(c[d])}};d.prototype.addImage=function(a){a=new l(a);this.images.push(a)};d.prototype.check=function(){function a(e,f){b.options.debug&&m&&k.log("confirm",e,f);b.progress(e);c++;c===d&&b.complete();return!0}var b=this,c=0,d=this.images.length;
this.hasAnyBroken=!1;if(d)for(var e=0;e<d;e++){var f=this.images[e];f.on("confirm",a);f.check()}else this.complete()};d.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a);b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})};d.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){b.emit(a,b);b.emit("always",b);if(b.jqDeferred)b.jqDeferred[b.hasAnyBroken?
"reject":"resolve"](b)})};h&&(h.fn.imagesLoaded=function(a,b){return(new d(this,a,b)).jqDeferred.promise(h(this))});l.prototype=new e;l.prototype.check=function(){var a=p[this.img.src]||new g(this.img.src);if(a.isConfirmed)this.confirm(a.isLoaded,"cached was confirmed");else if(this.img.complete&&void 0!==this.img.naturalWidth)this.confirm(0!==this.img.naturalWidth,"naturalWidth");else{var b=this;a.on("confirm",function(a,c){b.confirm(a.isLoaded,c);return!0});a.check()}};l.prototype.confirm=function(a,
b){this.isLoaded=a;this.emit("confirm",this,b)};var p={};g.prototype=new e;g.prototype.check=function(){if(!this.isChecked){var a=new Image;c.bind(a,"load",this);c.bind(a,"error",this);a.src=this.src;this.isChecked=!0}};g.prototype.handleEvent=function(a){var b="on"+a.type;if(this[b])this[b](a)};g.prototype.onload=function(a){this.confirm(!0,"onload");this.unbindProxyEvents(a)};g.prototype.onerror=function(a){this.confirm(!1,"onerror");this.unbindProxyEvents(a)};g.prototype.confirm=function(a,b){this.isConfirmed=
!0;this.isLoaded=a;this.emit("confirm",this,b)};g.prototype.unbindProxyEvents=function(a){c.unbind(a.target,"load",this);c.unbind(a.target,"error",this)};return d});function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}
(function(a){a.fn.instagramLite=function(e){if(!this.length)return this;var c=this;c.settings={};c.settings=a.extend({},{userID:null,clientID:null,limit:6,list:!0,urls:!1,localstore:null,error:function(){},success:function(){}},e);var b=a(this);c.settings.clientID&&c.settings.userID?b.each(function(){var e=null;if(c.settings.localstore&&supports_html5_storage())try{var d=JSON.parse(localStorage.getItem(c.settings.localstore.key));d&&(new Date).getTime()-d.time<=c.settings.localstore.timeout&&(e=d.data)}catch(l){}var g=
function(a,d){for(var e=0;e<a.length;e++){var f=a[e];if("image"===f.type){var g='\x3cimg src\x3d"'+f.images.thumbnail.url+'" alt\x3d"Instagram Image" data-filter\x3d"'+f.filter+'" /\x3e';c.settings.urls&&(g='\x3ca href\x3d"'+f.link+'" target\x3d"_blank"\x3e'+g+"\x3c/a\x3e");c.settings.list&&(g="\x3cli\x3e"+g+"\x3c/li\x3e");b.append(g)}}c.settings.success.call(b,d)};e?g(e,!0):a.ajax({type:"GET",url:"https://api.instagram.com/v1/users/"+c.settings.userID+"/media/recent/?client_id\x3d"+c.settings.clientID+
"\x26count\x3d"+c.settings.limit+"\x26callback\x3d?",dataType:"jsonp",cache:!0,success:function(a){200===a.meta.code?(c.settings.localstore&&supports_html5_storage()&&localStorage.setItem(c.settings.localstore.key,JSON.stringify({time:(new Date).getTime(),data:a.data})),g(a.data,!1)):c.settings.error.call(this,a.meta.code,a.meta.error_message)},error:function(){c.settings.error.call(this)}})}):console.log("Both a client ID and username are required to use this plugin.")}})(jQuery);
jQuery(function(){initNav();initTree();initSlideShow();initAccordion();initAboutSections();initNavSearch()});window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,e){window.setTimeout(a,1E3/60)}}();
window.requestTimeout=function(a,e){function c(){(new Date).getTime()-b>=e?a.call():f.value=requestAnimFrame(c)}if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(a,e);var b=(new Date).getTime(),f={};f.value=requestAnimFrame(c);return f};
window.clearRequestTimeout=function(a){window.cancelAnimationFrame?window.cancelAnimationFrame(a.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(a.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(a.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(a.value):window.msCancelRequestAnimationFrame?msCancelRequestAnimationFrame(a.value):clearTimeout(a)};
function initTree(){$("ul.dynamic li.node \x3e span").click(function(){var a=$(this).parent();1==$(a).hasClass("open")?($(a).removeClass("open"),$(a).addClass("close")):($(a).removeClass("close"),$(a).addClass("open"))})}function initAboutSections(){var a=$("a.about");a.click(function(a){var c=$(this);c.slideUp(300);c.prev("div").slideDown(300);a.preventDefault()});0==$("div#main.faculty-page ul.news-list li").length&&(a.hide(),a.prev("div").show())}
function initNav(){jQuery(".slide-frame").sameHeight({elements:"ul",flexible:!0,multiLine:!0});var a=$("#nav");a.find("\x3e ul \x3e li \x3e a").hover(function(){var a=$(this),c=a.closest("#nav, #nav2");0==c.find("\x3e ul \x3e li.active").length||a.parent().hasClass("active")||(c.find("\x3e ul \x3e li.active").removeClass("active"),a.parent().addClass("active"),a.closest(".nav-holder").addClass("active"))},function(){});a.find("\x3e ul \x3e li \x3e a").click(function(a){var c=$(this),b=c.closest("#nav, #nav2");
c.parent().find(".slide-holder").size()&&(c.parent().hasClass("active")?(c.parent().removeClass("active"),c.closest(".nav-holder").removeClass("active")):(b.find("\x3e ul \x3e li.active").removeClass("active"),c.parent().addClass("active"),c.closest(".nav-holder").addClass("active")),a.preventDefault())});$(document).click(function(a){$(a.target).closest(".nav-holder").length||($(".nav-holder").removeClass("active"),$("#nav").find("\x3e ul \x3e li.active").removeClass("active"),a.stopPropagation())});
$("ul.nav2 \x3e li \x3e ul").hover(function(){$(this).closest("li").find("\x3e a").addClass("active")},function(){$(this).closest("li").find("\x3e a").removeClass("active")})}function initSlideShow(){$(".gallery-holder, .slider-holder").fadeGallery({slideElements:".slide",pauseOnHover:!0,autoRotation:!0,switchTime:1E4,duration:650,event:"click"});$(".photo-line").tinycarousel({interval:!0})}
jQuery.fn.fadeGallery=function(a){a=jQuery.extend({slideElements:"div.slideset \x3e div",pagerLinks:".control-panel li",btnNext:"a.btn-next",btnPrev:"a.btn-prev",btnPlayPause:"a.play-pause",pausedClass:"paused",playClass:"playing",activeClass:"active",pauseOnHover:!0,autoRotation:!1,autoHeight:!1,switchTime:3E3,duration:650,event:"click"},a);return this.each(function(){function e(){u=r;r<A-1?r++:r=0;b()}function c(){g.length&&g.removeClass(w).eq(r).addClass(w);l.eq(u).removeClass(w);l.eq(r).addClass(w)}
function b(){l.stop(!0,!0);l.eq(u).fadeOut(q);l.eq(r).fadeIn(q);c();f()}function f(){p&&!x&&(y&&clearRequestTimeout(y),y=requestTimeout(e,z+q))}var d=jQuery(this),l=jQuery(a.slideElements,d),g=jQuery(a.pagerLinks,d),h=jQuery(a.btnPrev,d),k=jQuery(a.btnNext,d),m=jQuery(a.btnPlayPause,d),n=a.pauseOnHover,p=a.autoRotation,w=a.activeClass,s=a.pausedClass,t=a.playClass,q=a.duration,z=a.switchTime,v=a.event,x=!1,u=0,r=0,A=l.length,y;A&&(l.hide().eq(r).show(),p?d.removeClass(s).addClass(t):d.removeClass(t).addClass(s),
h.length&&h.bind(v,function(){u=r;0<r?r--:r=A-1;b();return!1}),k.length&&k.bind(v,function(){e();return!1}),g.length&&g.each(function(a){jQuery(this).bind(v,function(){r!=a&&(u=r,r=a,b());return!1})}),m.length&&m.bind(v,function(){d.hasClass(s)?(d.removeClass(s).addClass(t),p=!0,f()):(y&&clearRequestTimeout(y),d.removeClass(t).addClass(s));return!1}),n&&d.hover(function(){x=!0;y&&clearRequestTimeout(y)},function(){x=!1;f()}),c(),f())})};
function initAccordion(){$(".accordion \x3e li \x3e a").click(function(a){var c=$(this);c.parent().hasClass("active")?c.parent().find("ul").slideUp(200,function(){c.parent().removeClass("active")}):c.parent().find("ul").slideDown(200,function(){c.parent().addClass("active")});a.preventDefault()});var a=$(".side-list \x3e .box").find("li.self");1>a.length?$(".side-list \x3e .box").first().addClass("active"):$(a[0]).closest("li.box").addClass("active");$(".side-list \x3e .box \x3e a").click(function(a){$(this).parent().hasClass("active")||
($(this).parents(".side-list").children("li.active").find("ul").slideUp(200,function(){$(this).parent().removeClass("active")}),$(this).parent().find("ul").slideDown(200,function(){$(this).parent().addClass("active")}));a.preventDefault()})}
(function(a){function e(b,e){this.options=a.extend({},c,e);this._defaults=c;this._name="tinycarousel";var d=this,l=b.find(".viewport:first"),g=b.find(".overview:first"),h=0,k=b.find(".next:first"),m=b.find(".prev:first"),n=b.find(".bullet"),p=0,w={},s=0,t=0,q=0,z="x"===this.options.axis,v=z?"Width":"Height",x=z?"left":"top",u=null;this.slidesTotal=this.slideCurrent=0;this.update=function(){g.find(".mirrored").remove();h=g.children();p=l[0]["offset"+v];t=h.first()["outer"+v](!0);d.slidesTotal=h.length;
d.slideCurrent=d.options.start||0;s=Math.ceil(p/t);g.append(h.slice(0,s).clone().addClass("mirrored"));g.css(v.toLowerCase(),t*(d.slidesTotal+s));return d};this.start=function(){d.options.interval&&(clearTimeout(u),u=setTimeout(function(){d.move(++q)},d.options.intervalTime));return d};this.stop=function(){clearTimeout(u);return d};this.move=function(c){q=c;d.slideCurrent=q%d.slidesTotal;0>q&&(d.slideCurrent=q=d.slidesTotal-1,g.css(x,-d.slidesTotal*t));q>d.slidesTotal&&(d.slideCurrent=q=1,g.css(x,
0));w[x]=-q*t;g.animate(w,{queue:!1,duration:d.options.animation?d.options.animationTime:0,always:function(){b.trigger("move",[h[d.slideCurrent],d.slideCurrent])}});d.options.buttons&&!d.options.infinite&&(m.toggleClass("disable",0>=d.slideCurrent),k.toggleClass("disable",d.slideCurrent>=d.slidesTotal-s));d.options.bullets&&(n.removeClass("active"),a(n[d.slideCurrent]).addClass("active"));d.start();return d};d.update();d.move(d.slideCurrent);(function(){d.options.buttons&&(m.click(function(){d.move(--q);
return!1}),k.click(function(){d.move(++q);return!1}));a(window).resize(d.update);if(d.options.bullets)b.on("click",".bullet",function(){d.move(q=+a(this).attr("data-slide"));return!1})})();return d}var c={start:0,axis:"x",buttons:!1,bullets:!1,interval:!1,intervalTime:8E3,animation:!0,animationTime:1E3,infinite:!0};a.fn.tinycarousel=function(b){return this.each(function(){a.data(this,"plugin_tinycarousel")||a.data(this,"plugin_tinycarousel",new e(a(this),b))})}})(jQuery);
(function(a){function e(d,e){var g=a(),h,k=0,m=d.eq(0).offset().top;d.each(function(d){d=a(this);d.offset().top===m?g=g.add(this):(h=c(g),k=Math.max(k,b(g,h,e)),g=d,m=d.offset().top)});g.length&&(h=c(g),k=Math.max(k,b(g,h,e)));e.biggestHeight&&d.css(e.useMinHeight&&f?"minHeight":"height",k)}function c(b){var c=0;b.each(function(){c=Math.max(c,a(this).outerHeight())});return c}function b(b,c,e){var h,k="number"===typeof c?c:c.height();b.removeClass(e.leftEdgeClass).removeClass(e.rightEdgeClass).each(function(b){b=
a(this);var d=0,p="border-box"===b.css("boxSizing");"number"!==typeof c&&b.parents().each(function(){var b=a(this);if(c.is(this))return!1;d+=b.outerHeight()-b.height()});h=k-d;h-=p?0:b.outerHeight()-b.height();0<h&&b.css(e.useMinHeight&&f?"minHeight":"height",h)});b.filter(":first").addClass(e.leftEdgeClass);b.filter(":last").addClass(e.rightEdgeClass);return h}a.fn.sameHeight=function(c){var l=a.extend({skipClass:"same-height-ignore",leftEdgeClass:"same-height-left",rightEdgeClass:"same-height-right",
elements:"\x3e*",flexible:!1,multiLine:!1,useMinHeight:!1,biggestHeight:!1},c);return this.each(function(){function c(){n.css(l.useMinHeight&&f?"minHeight":"height","");l.multiLine?e(n,l):b(n,d,l)}var d=a(this),k,m,n=d.find(l.elements).not("."+l.skipClass);if(n.length){c();var p=function(){m||(m=!0,c(),clearTimeout(k),k=setTimeout(function(){c();setTimeout(function(){m=!1},10)},100))};l.flexible&&a(window).bind("resize orientationchange fontresize",p);a(window).bind("load",p)}})};var f="undefined"!==
typeof document.documentElement.style.maxHeight})(jQuery);function initNavSearch(){$(".search-form .search-directions").click(function(a){$(a.target).closest("div.search-where").find(".search-directions-list").toggle();a.stopPropagation()});$(".search-form .search-directions-list li").click(function(a){var e=$(a.target);e.closest("div.search-directions-list").hide();e.closest("form")[0].action=e.attr("value");e.closest("div.search-where").find("span.value").html(e.html());a.stopPropagation()})}
var ScrollSneak=function(a,e){"undefined"==typeof e&&!0===a&&(a=null,e=!0);a=("string"==typeof a?a:window.location.host).split("_").join("");var c;this.scroll=function(){if(0==window.name.search("^"+a+"_(\\d+)_(\\d+)_")){var b=window.name.split("_");window.scrollTo(b[1],b[2]);window.name=b.slice(3).join("_")}};e||this.scroll();this.sneak=function(){"undefined"==typeof c&&(c=window.name);var b=0,e=0;"number"==typeof window.pageYOffset?(b=window.pageYOffset,e=window.pageXOffset):document.body&&(document.body.scrollLeft||
document.body.scrollTop)?(b=document.body.scrollTop,e=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(b=document.documentElement.scrollTop,e=document.documentElement.scrollLeft);if(b||e)window.name=a+"_"+e+"_"+b+"_"+c;return!0}};$(function(){$("input:checkbox").size()&&$("input:checkbox").checkbox();$("input:radio").size()&&$("input:radio").radio()});
$.fn.checkbox=function(a){var e=$.fn.checkbox.method;if("string"==typeof a&&a in $.fn.checkbox.method){var c=$(this);e[a](c);return c}"method"in $.fn.checkbox||($.fn.checkbox.method={destroy:function(a){if(a.data("customized"))a.off("change.customForms"),a.each(function(){$(this).data("customCheckbox").off("click.customForms").remove()}),a.removeData();else throw Error("объект не проинициализирован");},check:function(a){a.trigger("change.customForms",["check"])},uncheck:function(a){a.trigger("change.customForms",
["uncheck"])},toggle:function(a){var b=this;a.each(function(){$(this).is(":checked")?b.uncheck($(this)):b.check($(this))})}},e=$.fn.checkbox.method);var b=[];$(this).each(function(){$(this).data("customized")||b.push(this)});if(!$(this).size())throw Error("селектор "+$(this).selector+" возвратил пустой набор элементов");if(b.length){a=$.extend({checkboxClass:"checkboxAreaChecked",labelClass:"active",customCheckboxClass:"checkboxArea"},a);var f=$('\x3cdiv class\x3d"'+a.customCheckboxClass+'"\x3e\x3c/div\x3e'),
b=$(b);b.data("customized",!0);return b.each(function(){function b(){g.get(0).checked=!0;h.addClass(k);g.data("label")&&g.data("label").addClass(m)}function c(){g.get(0).checked=!1;h.removeClass(k);g.data("label")&&g.data("label").removeClass(m)}var g=$(this),h=f.clone(),k=a.checkboxClass,m=a.labelClass;g.data("customCheckbox",h);h.insertAfter(g);g.closest("label").size()?g.data("label",g.closest("label")):g.attr("id")&&g.data("label",$("label[for\x3d"+g.attr("id")+"]"));g.on("change.customForms",
function(a,e){"check"==e?b():"uncheck"==e?c():g.is(":checked")?b():c()}).trigger("change.customForms");h.on("click.customForms",function(a){h.hasClass(k)?e.uncheck(g):e.check(g);a.preventDefault()})})}throw Error("чекбокс/ы уже проинициализирован/ы");};
$.fn.radio=function(a){var e=$.fn.radio.method;if("string"==typeof a&&a in $.fn.radio.method){var c=$(this);e[a](c);return c}"method"in $.fn.radio||($.fn.radio.method={destroy:function(a){var b=[];a.each(function(){$(this).data("customized")&&b.push(this)});if(b.length)a=$(b),a.off("change.customForms"),a.each(function(){$(this).data("customRadio").off("click.customForms").remove()}),a.removeData();else throw Error("объект не проинициализирован");},check:function(a){a.trigger("change",["check"])}},
e=$.fn.radio.method);"group"in $.fn.radio||($.fn.radio.group={});if(!$(this).size())throw Error("селектор "+$(this).selector+" возвратил пустой набор элементов");var b=[];$(this).each(function(){$(this).data("customized")||b.push(this)});if(b.length){a=$.extend({radioClass:"radioAreaChecked",labelClass:"active",customRadioClass:"radioArea"},a);var f=$('\x3cdiv class\x3d"'+a.customRadioClass+'"\x3e\x3c/div\x3e'),d=$.fn.radio.group,b=$(b);b.data("customized",!0);b.each(function(){!$(this).attr("name")||
$(this).attr("name")in d||(d[$(this).attr("name")]=b.filter("input:radio[name\x3d'"+$(this).attr("name")+"']"))});return b.each(function(){function b(a){a.is("input:radio")?a.get(0).checked=!0:a.addClass(n)}function c(a){a.is("input:radio")?a.get(0).checked=!1:a.removeClass(n)}var h=$(this),k=f.clone(),m=h.attr("name")in d?d[h.attr("name")]:0,n=a.radioClass,p=a.labelClass;h.data("customRadio",k);k.insertAfter(h);h.closest("label").size()?h.data("label",h.closest("label")):h.attr("id")&&h.data("label",
$("label[for\x3d"+h.attr("id")+"]"));h.on("change.customForms",function(a,d){if(h.is(":checked")||"check"==d)m&&(c(m.not(h).next()),m.data("label").size()&&m.each(function(){$(this).data("label")&&$(this).data("label").removeClass("active")})),b(k),"check"==d&&b(h),h.data("label")&&h.data("label").addClass(p)}).trigger("change.customForms");k.on("click.customForms",function(a){k.hasClass(n)||e.check(h);a.preventDefault()})})}throw Error("радиокнопка/и уже проинициализирована/ы");};
function initSearch(a){function e(){b.results.find("li").size()>=(b.start||0)+b.pageSize&&(b.fetchMore.finish(),b.fetchMore.show())}function c(a){a&&b.results.html(null);b.start=a?0:(b.start||0)+b.pageSize;a=b.form.serializeArray();a.push({name:"spc.action",value:"search"});a.push({name:"spc.start",value:b.start});a.push({name:"spc.limit",value:b.pageSize});$.post(b.form[0].action,a).done(function(a){b.results.append(a);b.results.find("li:hidden").slideDown();e()});b.fetchMore.slideUp(500)}var b=
{form:$("form#spc-search-form"),results:$("ul#spc-search-results"),fetchMore:$("a#spc-fetch-more"),start:0,pageSize:a||1};b.results.find("li").show();b.form.submit(function(){c(!0);return!1});b.fetchMore.click(function(){c(!1);return!1});b.fetchMore.hide();e()}
function initMainNews(a){var e=[{subscribed:!0,holder:$("div.news-holder"),results:$("ul.news-list"),type:"a",subType:a},{subscribed:!0,holder:$("div.announcement-holder"),results:$("ul.announcement-list"),type:"b"},{subscribed:!0,holder:$("div.faculty-holder"),results:$("ul.faculty-list"),type:"c"}],c=0;for(a=0;a<e.length;++a)e[a].dh=e[a].holder.height()-e[a].results.height(),c<e[a].dh&&(c=e[a].dh);for(a=0;a<e.length;++a)e[a].oh=e[a].dh-c;var b=c,f=Math.max(window.innerHeight,350),d=$("div#news"),
l=$("a#mpc-fetch-more"),g=0,h=function(a){if(0==g){for(var c=!1,f=0;f<e.length;++f){var h=e[f],c=c||h.subscribed,k=!1,m=0;h.results.find("li").each(function(b,c){c=$(c);m+=c.outerHeight();k||m>a-h.dh?(k=!0,c.hide()):c.show()});h.holder.height()>b&&(b=h.holder.height())}d.height(b);c&&(l.finish(),l.show())}},k=function(a,b){var c=0;a.results.find("li").each(function(a,b){c+=$(b).outerHeight()});return c<b-a.dh},m=function(a,b){var c={"mpc.action":"fetchMore","mpc.fetch.type":a.type},d=c["mpc."+a.type+
".skip"]=a.results.find("li").size();a.subType&&(c["mpc."+a.type+".subType"]=a.subType);$.post(l[0].href,c,function(c){$(c).find("li").hide();a.results.append(c);a.results.find("li").size()==d&&(a.subscribed=!1);k(a,b)&&a.subscribed&&(++g,m(a,b))}).fail(function(){a.subscribed=!1}).always(function(){--g;h(b)})},n=function(){l.slideUp(500);for(var a=b+f-c,d=0;d<e.length;++d){++g;var n=e[d];k(n,a)&&n.subscribed?m(n,a):--g}h(a+c)};l.click(function(){n();return!1});l.hide();n()}
function initFetchMore(a,e,c,b,f){$(a).hide();$(c).find("li").show();$(a).click(function(){var d={};d[f+".action"]="fetchMore";d[f+".skip"]=$(c).find("li").size();d[f+".limit"]=b;$.post(e,d,function(d){$(a).hide();var e=$(c).find("li").size();$(c).append(d);$(c).find("li").size()-e>=b&&$(a).show();$(c).find("li:hidden").slideDown()});return!1});$(c).find("li").size()>=b&&$(a).show()}
function initNewsMain(a){var e=$("div#news-container"),c=$("a#news-fetch-more");e.imagesLoaded(function(){e.masonry({itemSelector:".news-item"})});c.click(function(){var b=e.find(".news-item").size();c.hide();$.post(null,{"mnc.action":"fetchMoreNews","mnc.news.skip":b,"mnc.news.limit":a},function(f){f=$.parseHTML(f);e.append(f);e.masonry("appended",f);e.find(".news-item").size()-b>=a&&c.fadeIn(500)});return!1});c.hide();e.find(".news-item").size()>=a&&c.show()}
function initRemember(){var a=function(a){a.find("input[name\x3dcaptcha]").val("");a.find("img").attr("src",a.attr("action")+"?action\x3dcaptcha\x26"+(new Date).getTime())};$(".event-list .remember").click(function(e){$(".remember-form").fadeOut(200);var c=$(this).closest("li").find(".remember-form"),b=c.find("input[name\x3dcontact]");b.val("");b.focus();a(c);c.fadeIn(200);e.preventDefault()});$(".remember-form .close").click(function(a){$(".remember-form").fadeOut(200);a.preventDefault()});$(".remember-form .reload-captcha").click(function(e){a($(this).closest("form"));
e.preventDefault()});$(".remember-form").submit(function(e){e.preventDefault();var c=$(e.target);if(""!=$.trim(c.find("input[name\x3dcontact]").val())){var b=c.serializeArray();b.push({name:"action",value:"remember"});$.post(e.target.action,b,function(b){b.success?(c.find("input[type\x3dtext]").val(""),c.parent().find(".remember").hide(),c.fadeOut(500)):(a(c),alert(b.message||"Ошибка сохранения напоминания"))}).fail(function(){})}})}
function initEventsMain(a,e){var c=$("ul.event-list"),b=$("a.fetch-more");c.imagesLoaded(function(){c.masonry({itemSelector:"li"})});b.click(function(){var f=c.find("li").size();b.hide();$.post(a,{"news.action":"fetchMore","news.skip":f,"news.limit":e},function(a){a=$.parseHTML(a);c.append(a);c.masonry("appended",a);c.find("li").size()-f>=e&&b.fadeIn(500)});return!1});b.hide();c.find("li").size()>=e&&b.show()}
function initScroll(a,e){var c=new ScrollSneak(e);$(a).click(function(){return c.sneak()})}function initSiteMap(a){var e=function(c,b){$(c).find("li.node \x3e span").click(function(){var c=$(this).parent(),d=c.find("\x3e ul");""==d.html()&&(d.html("\x26nbsp;"),$.post(a,{parent:c.attr("value")},function(a){d.html(a);e(d,b+1)}));0<b&&(1==c.hasClass("open")?(c.removeClass("open"),c.addClass("close")):(c.removeClass("close"),c.addClass("open")))})};e("#sitemap",0)};