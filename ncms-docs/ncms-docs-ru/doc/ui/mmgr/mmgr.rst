.. _mmgr:

Управление файлами в nCMS (медиа репозиторий)
=============================================


.. figure:: img/mmgr_img1.png

    Общий вид интерфейса управления медиа файлами nCMS

Слева пользователь может выбрать текущий каталог в медиарепозитории.
В центре список файлов в выбранном каталоге и его подкаталогах (в зависимости от
текущих опций просмотра). Справа - информация о файле, основные свойства файла
и интерфейс редактирования для текстовых файлов или панель просмотра файла, как
изображения. Доступ к этому интерфейсу имеют все зарегистрированные пользователи
системы.

Обозначения для каталогов медиарепозитория
------------------------------------------

.. image:: img/mmgr_img2.png
    :align: left

Каталог является *системным* и может быть изменен пользователем обладающим
административными правами.

.. image:: img/mmgr_img3.png
    :align: left

Каталог является *пользовательским* и может быть изменен владельцем или
пользователем обладающим административными правами.


Доступ к файлам медиарепозитория
--------------------------------

* Все файлы, которые находятся в каталогах: `/page` и `/site` медиарепозитория nCMS (опция конфигурации :ref:`asm/site-files-root <conf>`)
  доступны внешним пользователям по HTTP протоколу, если в правилах shiro конфигурации сервера nCMS (`shiro.ini`) не указаны
  дополнительные ограничения.
* Зарегистрированный в nCMS пользователь может изменить содержимое файл или удалить файла, когда выполняется
  как минимум одно из следующих условий:

  * Пользователь является владельцем файла (пользователь создал этот файл)
  * Пользователь обладает правами администратора (роль `admin`)

  Удалить файл можно только тогда, когда на этот файл нет
  ссылок со страниц сайтов в nCMS


Операции над файлами и опции поиска и отображения
-------------------------------------------------

.. figure:: img/mmgr_img4.png

    Список файлов в выбраном каталоге

Двойной клик по имени файла или по описанию файла позволяет переименовать
файл или изменить его описание.

|

.. image:: img/mmgr_img5.png
    :align: left

Кнопка создания нового пустого файла `Новый файл`, пустой файл можно создать
комбинацией клавиш `Alt+Enter`. `Загрузить файлы` позволяет выбрать локальные
файлы на диске и отправить их в текущий каталог nCMS. Файлы можно
добавить в репозиторий перетащив их с рабочего стола в список файлов.

.. image:: img/mmgr_img6.png
    :align: left

Удаление выбранного файла в списке. Файл также можно удалить клавишей `Delete`.

.. note::

    nCMS позволит удалить только те файлы на которые отсутвуют ссылки со
    страниц сайта.

.. image:: img/mmgr_img7.png
    :align: left

Запуск она редактора для текстовых файлов. Запустить редактор на выбранном
файле можно с помошью клавишы `F4`

.. image:: img/mmgr_img8.png
    :align: left

Перенести выбранные файлы в другую папку.

.. image:: img/mmgr_img9.png
    :align: left

Переключатель сквозного режима просмотра файлов в каталоге. В том
случае, если этот режим включен, в списке файлов будут отображены
файлы в текущем каталоге и во всех дочерних подкаталогах этого каталога.

.. image:: img/mmgr_img10.png
    :align: left

При отключеном режиме сквозного просмотра будут отображены только файлы
находящиеся в этом каталоге.


.. _mmgr_hotkeys:

Горячие клавиши (hot keys)
--------------------------

Активный элемент UI это текущий, имеющий фокус элемент.

========================== ==================== ========================================
 Активный элемент UI        Комбинация клавиш               Действие
========================== ==================== ========================================
Дерево папок                `Delete`             Удаление каталога
Дерево папок                `F2`                 Переименовать каталог
Дерево папок                `F6`                 Перенос каталога в другой каталог
Дерево папок                `Alt+Insert`         Создание нового каталога в текщем выбранном каталоге
Список файлов               `Alt+Insert`         Создание пустого текстового файла
Список файлов               `Delete`             Удаление выбранного файла/файлов
Список файлов               `F2`                 Переименовать выбранный файл или сменить его описание
Список файлов               `F4`                 Редактирование выбранного файла
Список файлов               `F6`                 Перенос выбранного файла/файлов в другой каталог
========================== ==================== ========================================










